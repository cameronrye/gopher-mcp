# Gopher & Gemini MCP Server Configuration
# Copy this file to .env and customize as needed

# =============================================================================
# GOPHER PROTOCOL CONFIGURATION
# =============================================================================

# Maximum response size in bytes (default: 1048576 = 1MB)
GOPHER_MAX_RESPONSE_SIZE=1048576

# Request timeout in seconds (default: 30)
GOPHER_TIMEOUT_SECONDS=30

# Enable response caching (default: true)
GOPHER_CACHE_ENABLED=true

# Cache time-to-live in seconds (default: 300 = 5 minutes)
GOPHER_CACHE_TTL_SECONDS=300

# Maximum number of cache entries (default: 1000)
GOPHER_MAX_CACHE_ENTRIES=1000

# Comma-separated list of allowed hosts (default: none = all hosts allowed)
# Example: GOPHER_ALLOWED_HOSTS=gopher.floodgap.com,gopher.quux.org,sdf.org
GOPHER_ALLOWED_HOSTS=

# Maximum selector length in characters (default: 1024)
GOPHER_MAX_SELECTOR_LENGTH=1024

# Maximum search query length in characters (default: 256)
GOPHER_MAX_SEARCH_LENGTH=256

# =============================================================================
# GEMINI PROTOCOL CONFIGURATION
# =============================================================================

# Maximum response size in bytes (default: 1048576 = 1MB)
GEMINI_MAX_RESPONSE_SIZE=1048576

# Request timeout in seconds (default: 30)
GEMINI_TIMEOUT_SECONDS=30

# Enable response caching (default: true)
GEMINI_CACHE_ENABLED=true

# Cache time-to-live in seconds (default: 300 = 5 minutes)
GEMINI_CACHE_TTL_SECONDS=300

# Maximum number of cache entries (default: 1000)
GEMINI_MAX_CACHE_ENTRIES=1000

# Comma-separated list of allowed hosts (default: none = all hosts allowed)
# Example: GEMINI_ALLOWED_HOSTS=geminiprotocol.net,warmedal.se,kennedy.gemi.dev
GEMINI_ALLOWED_HOSTS=

# Enable TOFU (Trust-on-First-Use) certificate validation (default: true)
GEMINI_TOFU_ENABLED=true

# Enable client certificate support (default: true)
GEMINI_CLIENT_CERTS_ENABLED=true

# TOFU storage file path (default: ~/.gemini/tofu.json)
GEMINI_TOFU_STORAGE_PATH=

# Client certificate storage directory (default: ~/.gemini/client_certs/)
GEMINI_CLIENT_CERT_STORAGE_PATH=

# =============================================================================
# TLS CONFIGURATION (GEMINI ONLY)
# =============================================================================

# Minimum TLS version (default: TLSv1.2)
# Options: TLSv1.2, TLSv1.3
GEMINI_TLS_VERSION=TLSv1.2

# Verify hostname in TLS certificates (default: true)
GEMINI_TLS_VERIFY_HOSTNAME=true

# Custom client certificate file path (optional)
GEMINI_TLS_CLIENT_CERT_PATH=

# Custom client private key file path (optional)
GEMINI_TLS_CLIENT_KEY_PATH=

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level (default: INFO)
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Enable structured logging (default: true)
STRUCTURED_LOGGING=true

# Log file path (optional, logs to stdout if not set)
LOG_FILE_PATH=

# =============================================================================
# MCP SERVER CONFIGURATION
# =============================================================================

# Server name for MCP identification (default: gopher-gemini-mcp)
MCP_SERVER_NAME=gopher-gemini-mcp

# Server version for MCP identification (default: auto-detected)
MCP_SERVER_VERSION=

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Enable development mode (default: false)
# This enables additional debugging and relaxed security
DEVELOPMENT_MODE=false

# Enable debug logging for specific components (comma-separated)
# Options: gopher_client, gemini_client, gemini_tls, tofu, client_certs
DEBUG_COMPONENTS=

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Enable strict host validation (default: false)
# When true, only explicitly allowed hosts are permitted
STRICT_HOST_VALIDATION=false

# Maximum number of redirects to follow (default: 5)
MAX_REDIRECTS=5

# Enable content type validation (default: true)
VALIDATE_CONTENT_TYPES=true

# Maximum URL length in characters (default: 1024 for Gopher, 1024 for Gemini)
MAX_URL_LENGTH=1024

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Maximum concurrent connections per protocol (default: 10)
MAX_CONCURRENT_CONNECTIONS=10

# Connection pool size (default: 5)
CONNECTION_POOL_SIZE=5

# Enable connection keep-alive (default: true)
CONNECTION_KEEP_ALIVE=true

# Keep-alive timeout in seconds (default: 30)
KEEP_ALIVE_TIMEOUT=30

# =============================================================================
# EXAMPLE CONFIGURATIONS
# =============================================================================

# High Security Configuration
# GOPHER_ALLOWED_HOSTS=gopher.floodgap.com,gopher.quux.org
# GEMINI_ALLOWED_HOSTS=geminiprotocol.net,warmedal.se
# STRICT_HOST_VALIDATION=true
# GEMINI_TOFU_ENABLED=true
# GEMINI_CLIENT_CERTS_ENABLED=true
# VALIDATE_CONTENT_TYPES=true

# High Performance Configuration
# GOPHER_CACHE_ENABLED=true
# GOPHER_CACHE_TTL_SECONDS=600
# GOPHER_MAX_CACHE_ENTRIES=2000
# GEMINI_CACHE_ENABLED=true
# GEMINI_CACHE_TTL_SECONDS=600
# GEMINI_MAX_CACHE_ENTRIES=2000
# MAX_CONCURRENT_CONNECTIONS=20
# CONNECTION_POOL_SIZE=10

# Development Configuration
# DEVELOPMENT_MODE=true
# LOG_LEVEL=DEBUG
# DEBUG_COMPONENTS=gopher_client,gemini_client,gemini_tls
# GOPHER_CACHE_ENABLED=false
# GEMINI_CACHE_ENABLED=false
# STRICT_HOST_VALIDATION=false

# Minimal Configuration (defaults for everything)
# GOPHER_TIMEOUT_SECONDS=30
# GEMINI_TIMEOUT_SECONDS=30
# LOG_LEVEL=INFO

# Large Content Configuration
# GOPHER_MAX_RESPONSE_SIZE=5242880  # 5MB
# GEMINI_MAX_RESPONSE_SIZE=5242880  # 5MB
# GOPHER_TIMEOUT_SECONDS=120
# GEMINI_TIMEOUT_SECONDS=120

# Privacy-Focused Configuration
# GOPHER_CACHE_ENABLED=false
# GEMINI_CACHE_ENABLED=false
# GEMINI_TOFU_ENABLED=true
# GEMINI_CLIENT_CERTS_ENABLED=false
# STRUCTURED_LOGGING=false

# =============================================================================
# NOTES
# =============================================================================

# 1. All size values are in bytes
# 2. All timeout values are in seconds
# 3. Boolean values should be: true, false, 1, 0, yes, no, on, off
# 4. Comma-separated lists should not have spaces after commas
# 5. File paths can be absolute or relative to the working directory
# 6. Environment variables take precedence over configuration files
# 7. Default values are used when variables are not set or empty
# 8. Some settings require server restart to take effect
# 9. TOFU and client certificate storage paths are created automatically
# 10. TLS settings only apply to Gemini protocol connections
